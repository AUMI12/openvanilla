= skkime's page =

== [最新情報] ==

=== [2005/02/19] ===

snap20050215 を置きました。snap20041208 からの変更は次の通りです。

* Annotation の中に ``['' や ``]'' が含まれる時に辞書検索を行った場合、その候補以降が選択できないバグの修正。 (sabimaru さん、バグレポートありがとうございました)
* Annotation に ``['' が含まれる際の無毒化の rule の変更。上の問題と重なるのですが、annotation に ``['' を含む候補を登録すると、(concat ...) が登録されて登録内容が壊れます。このバグを fix しました。
* Text Service Framework 側も annotation が表示されるように修正。
* 単候補表示から複数候補に切り替えて、``x'' を押し単候補表示に戻した時、丁度その候補に annotation があった場合に正しく表示されない bug の修正。

=== [2004/12/08] ===

snap20041208 を置きました。snap20040929 からの変更は次の通りです。

* Windows2000 環境において suspend した process が存在すると system 全体が停止するバグの修正。

Thanks to Max Burmistrov for reporting the bug report about suspended process.

=== [2004/09/29] ===

snap20040929 を置きました。snap20040317 からの変更は次の通りです。

* annotation の表示に tooltip を使うようにしました。
* minibuffer 表示に折り返しをつけるようにしました。

=== [2004/03/17] ===

snap20040317 を置きました。snap20040223 からの変更は次の通りです。

* Windows2000 で無効にしていた Text Service Framework の設定を再度有効にして compile し直しました。
* X-Mouse を利用すると Window がどの設定にしていても自動的に最前面に出てしまうバグを fix しました。(TOYAMA Sumio さん、バグレポート、ありがとうございます)
* Text Service Framework を利用している application で「変換中の文字列」の色設定が反映されていなかったバグを fix しました。

=== [2004/02/23] ===

snap20040223 を置きました。snap20040218 からの変更は「Windows2000 へのログオン時にエラーが発生して停止するバグの修正」です。(KOMURA Kazuhiroさん、デバッグに御付き合い下さいまして有難うございました)

=== [2004/02/18] ===

snap20040218 を置きました。snap20040214 からの変更は、uistate.c を snap20040203 の時点まで巻戻した、です。

これは「Windowsへのログオン直後にエラーが発生し，そこで止まってしまう」というバグに対して uistate.c の問題かと考えたからです。(KOMURA Kazuhiroさん、レポートありがとうございます)

取り敢えず、これで様子見のつもりです。

また 「Winlogon の画面の IME を skkime にすると skkiserv が起こせないので、変換の都度(それは必ず失敗するが)長時間待たされることになる」というバグが残っていることに気付きました。さすがに、そこの IME を切り替えることはおすすめできないのですが、何か対処するつもりです。(virtualpc の御陰でテストしやすくなりました)

=== [2004/02/14] ===

snap20040214 を置きました。snap20040203 からの変更は、微妙な調整のみです。

* 言語バーの更新頻度、タイミングを調整しました。
* status window が白いまま表示される期間が長いのを WM_ERASEBKGND のところで「無効時 bitmap」を貼り付けることで胡麻化しました。

です。前者の言語バーの調整で、言語バーが無反応になったりする現象が抑えられればと期待しています。

=== [2004/02/04] ===

snap20040203 を置きました。snap20031212 からの変更点は、

* LiteStep など特定の application ないし shell と組み合わせた時に status window が無反応になる (NAKAMURA Toshikazu さん、バグレポートありがとうございます)、
* [TSF] 直接コード入力モードの2番目の menu で候補を選択する際のキーが正しく表示されない、

バグの修正です。

== [過去のニュース] ==
=== [software の紹介] ===

SKKIME は、Microsoft Windows 上で動作する Input Method Editor の一種です。 GNU General Public License に従った free software として配布されます。現在 Windows'98 で動作するもの及び Windows2000 (Professional?)上で動作するものの2つが存在します。

SKKIME は、Nemacs, Mule, Demacs 上で動作する日本語入力環境を提供している SKK というシステムに似せて Windows の IME の形で実装を行ったものです。

== [目次] ==

* skkime for Windows9x
* skkime for Windows2000/XP
* リンク

=== [SKKIME for Windows'98] ===

カスタマイズ

パッケージに添付されている ReadMe.TXT を読むのが一番なのですが、取り敢えず問題になりそうなところだけをここに抜き出して書いておきます。
問題 	対処方法
改行キーを確定リターンとしたい 	(setq skk-egg-like-new-line t)
``@'' で日付が入るのが困る 	(define-key skkinput-map "@" 'j-self-insert)
Large 辞書の指定は？ 	(setq skk-aux-large-jisyo 辞書のパス)
``ohhon'' で ``おっほん'' と入力したい 	(setq skk-rom-kana-rule-list (cons '("oh" "h" (nil. nil)) skk-rom-kana-rule-list)

default.el を直接編集されてもかまわないですが、削除してしまったりしないで下さい。default.elが無くなると…仮名入力程度しかできなくなります。

インストール方法

配布ファイルの中に含まれる SKKIME98.INF を右クリックして下さい。メニューに含まれているインストールという項目を選べば、必要なファイルがコピーされインストールは完了です。

SKKIME98 を使う時には「設定」→「コントロールパネル」→「キーボード」→「言語」でSKKIME98 を追加して下さい。

通常は ALT + SHIFT で IME を切り替えて使うのが吉でしょう。 IME FUNCTION を多用しているアプリケーションなどは動かない筈です。(漢字から読みを得たいとか、そういうことは出来ませんので)

ソースコードから実行形式を作るにあたって

1. http://www.microsoft.com/ddk から Windows'98 DDK を拾って来ます。Windows'98 DDK が既にインストールされている場合には、この作業は不要です。
2. Windows'98 DDK をインストールします。デフォルトでは /98DDK にインストールされると思います。
3. /98DDK/src/ime/jpn の jpn の変わりに SKKIME98 のソースツリーを jpn という名前で移動させます。
4. /98DDK/lib/i386/[free,checked] に Visual C++ の library から ws2_32.lib をコピーします。

これで準備は整いました。

1. /98DDK/src/ime/jpn/skkiserv/[a,m] に移動して nmake.exe を実行します。skkiserv.exe 及び skkisrvm.exe が作られます。必要に応じて Makefile を適宜修正して下さい。コンパイルオプションを変更するなど…。
2. /98DDK/src/ime/jpn で build -cZ を実行すると、SKKIME98 が build され /98DDK/lib/i386/[free,checked] 以下にファイルがコピーされます。このあたりは DDK の他のサンプルの build 方法と同じです。この時、skkiserv.exe, skkisrvm.exe も一緒にコピーするので、先に make しておく必要があるだけです。

==== 更新履歴及びダウンロード ====

* SKKIME98-1.0beta9 (ソースコード(lostしました…)/実行形式lzh, tar+gz)
** lisp 解釈部分で文字列の解釈に "\057\057" と escape された文字が連続した場合、2つ目の文字が escape が解除されないバグを修正しました。
* SKKIME98-1.0beta8 (ソースコード/実行形式lzh, tar+gz)
** DebugPrintf を DEBUGPRINTF マクロ経由で呼び出すように修正しました。
** 実行形式が freebuild environment で作られてなかった (beta07) ので、build し直しました。
* SKKIME98-1.0beta7 (ソースコード/実行形式lzh, tar+gz)
** 変換結果を登録する時に "/" のような quote されなければならない文字が quote されずそのまま登録されていたバグを修正しました。
* SKKIME98-1.0beta6 (ソースコード/実行形式)
** Mixed Unicode Version で FullWidth Tilder が上手く入力できないバグを修正致しました。
** ``_'' が変換動作中に上手く入力されないバグを修正致しました。

バグレポートして下さった方々、本当にありがとうございます。

alphaXX は Nifty の Web Page 制限のために削除致しました。手元には保管してありますので、昔のバグありversion が欲しいとおっしゃられる方は私宛にメールして下さい。

alpha version から beta までの更新履歴はこちらです。

==== 現在知られている不具合 ====

現在知られている不具合(問題点)は次の通りです。

* Uninstall できません。"C:\Windows\System\skkime98.ime"," C:\Windows\System\skkim98m.ime", "C:\Windows\Ime\Skkime98" を削除すれば取り敢えず Uninstall できます。その場合にはあらかじめキーボードのプロパティから SKKIME98 を削除しておいて下さい。レジストリは CURRENT_USER と LOCAL_MACHINE の software\misc\windows\currentversion の下を削除して下さい。
* skkserv と通信できなかった時に TimeOut をきっちりと待ちますので、反応が鈍くなります。skkserv が存在しなかった場合に補助辞書を読み込むという機能も、skkserv を起こしに行くという機能もありません。
* ユーザ辞書のコードを日本語EUC決め打ちにしてあります。
* skk-aux-large 辞書を指定しても上手く辞書を読み込むことができないことがあるようです。wskkserv.exe を利用すれば仮名漢字変換が可能ではあるようなのですが…。

==== 動作確認を行ったアプリケーション ====

* NiftyManager 5.00
* FrontPage Express Version 2.0.2 11118
* IBM ホームページビルダー 2001
* Notepad
* WordPad
* Word'98
* Internet Explorer 5.0
* MS-DOS prompt
* Windows logon

=== [SKKIME for Windows2000] ===

==== 開発の状況 ====

skkiserv を全面的に書き換えました。また dialog の設定部分を一新しました。

Windows'98 版との違いは次の通りです。

* IME は skkiserv.exe と Named Pipe を利用してメッセージのやり取りを行います。実際に辞書の管理を行うのは skkiserv.exe の仕事となっています。
* Windows2000 の制約から Unicode 版のみです。
* 設定をファイルに置くのではなく、レジストリの中に置くように修正しました。
* 以前の skkiserv.exe と違い、skkiserv.exe が読み込むのは辞書設定だけになっています。(lisp を parse するのを DLL 内でするのは無理がありましたが、レジストリに書くようにしましたので)

==== 既知の問題点 ====

* 設定ダイアログの不足：入力中の色設定ダイアログ など 色設定ダイアログは実装(2003/01/10)
* 設定ダイアログの不備：幾つかのボタンが動作しない(「更新」)
* LISP：j-num-list を更新していないので、times が動作しない。
* ユーザ辞書：skkiserv スタート時のユーザ辞書の状態判定が甘い。
* UI Window が RootWindow Style？ の時におかしくなる。(デスクトップで文字入力を試すと簡単に再現できる)
* IME が閉じている状態で再変換すると変になる。 (2003/01/02)
* ソート済み辞書の okuri-ari 検索に失敗することがある。手元で再現させようとテスト中、まだ具体的な再現方法が分からない。Release Build 時、最適化にひっかかって発生するようである。最適化によって問題が出る部分は修正したので、テストを Release Build で継続中。(2003/01/04) fix できた模様。(2003/01/10)
* 候補表示の際に意味を表示する。ただし、これは変換候補表示 Window のデザインにも関わるので、どう解決するかはまだ思いついていない。 Annotation の表示機能を追加 (2003/01/13)
* Text Service Framework との連携がない。Text Service Framework というのは OfficeXP, WindowsXP の伸びる Toolbar のあたりを司る代物です。 Text Service Framework の対応までは行かないが、言語バー用のコードを追加。(2003/01/27) 2003/01/27 の段階のバグを修正。(2003/01/30) default の IME にすると派手に落ちるバグの修正？ (2003/02/01) 初期化/非初期化位置の調整。(2003/02/02) 更に調整。(2003/02/13)
* ログオフが遅くなる？ (2003/04/28) 修正＆テスト中です。
* イベントログのアプリケーションに UserEnv の警告が出る。(2003/05/28) 調査中です。どの操作が具体的に悪いことをしているのか…(勿論レジストリ操作が問題なわけですが)。

==== 未解決のバグリスト ====

|現象|取り敢えず対処方法|発生した環境|レポート日|状況|
|言語バーのアイコンが変になることがある。(例. ツールボタンが2つ入るなど)|言語バーをタスクバーにしまってから復元すれば一応余分なアイコンは消えるようである。|WindowsXP (WindowsUpdate により SP1) + OfficeXP SP2|2003/03/12|調査中|
|言語バーのアイコンが JP という青いアイコンだけになる|不明|Windows2000Pro + Office2000 + MS-Project2002|2003/03/10|環境構築中|
|特定のフォルダで Shift+Delete でファイルを削除しようとすると、Exprorer が「応答なし」になる|不明|Windows2000Pro + Office2000 + MS-Project2002|2003/03/10|環境構築中|
|特定のアプリケーションで仮名が半角カタカナでしか入らない？|不明|WindowsXP + CHOCOA/PuTTY？(未確認)|2002/?/?|調査中|

やはり言語バー (Text Service Framework) まわりは難しいですね…。DDK の中にサンプルがあれば良いのですが。(PlatformSDK の中にはあるが、そちらは COM を作ろうになってしまう)

==== 実装リストに入っているが未実装の機能 ====

* Reconversion の実装。 Reconversion の kakasi との連携。
* Reverse Conversion。辞書の構造上、逆変換を行うのは非常に困難であるが…一応リストに加えておく。恐らくは kakasi と連携するぐらいしか手がない。
* 連想辞書、edict 辞書の対応…。
* Text Service Framework の実現。例えば、Outlook Express では言語バーがきちんと更新されませんが、これは Text Service Framework 経由で呼ばれているからです。次期 Windows では IME はきっと COM になると予想していますし、この対応はしなければ…。 仮実装(テスト中)(2003/05/28)
* 再帰登録モードの抑制。PSO で遊んでいて…チャット中に再帰登録モードに入ると悲しいので、例えば「候補表示ウィンドウが自前(IME側)では持てない場合には、再帰登録モードには入らない」とか、Property 設定でコントロールできるようにするとか考えています。 一応実装…が、きちんと IME に composition window は表示しない、とアプリケーションから伝えられないとうまく動作しないです。画面外にウィンドウを表示して胡麻化そうとするタイプではうまく動作しません。また、Text Service Framework 側には…この操作はないです。アプリケーションからどういう情報を得られるのか…？(2003/05/28)
* T-Code 入力。
* DVORAK 配列に対応する。
* 数値変換の #4, #5 の実装。(これは 1.0 のリリースが終わってからにするべきか)

WINDDK2600 にて開発を行っているので、ソース自身は WindowsXP/2000 の両方で動くバイナリを作成できる筈ですが、まだきちんと確認していません。

==== 更新履歴及びダウンロード ====

まだ十分にテストされていない開発段階のものですが、ここに置きます。

* SNAPSHOT 2005/02/15 (Windows2000 バイナリ / WindowsXP バイナリ / ソース)
** Annotation の中に ``['' が存在すると、その候補以降が表示されず選択できないバグを修正しました。
** Annotation の中に ``[]'' が存在した場合の辞書登録の問題を修正しました。Annotation 中の ``[]'' は concat に置き換えられません。また、annotation 中の ``/'' は ``／'' に置き換えられます。
** Annotation が最後の単候補表示される単語にかかっていた場合、複数候補表示状態から previous-candidate で戻った時に annotation が表示されないバグを fix しました。
** [TSF] Annotation の表示機能を追加しました。
* SNAPSHOT 2004/12/08 (Windows2000 バイナリ / WindowsXP バイナリ / ソース)
** Fix: ``suspended'' application problem (Windows2000 environment)
* SNAPSHOT 2004/09/29 (Windows2000 バイナリ / WindowsXP バイナリ / ソース)
** annotation の表示に tooltip を使うようにしました。
** minibuffer 表示に折り返しをつけるようにしました。
* SNAPSHOT 2004/03/17 (Windows2000 バイナリ / WindowsXP バイナリ / ソース)
** cmnsrc.inc から NO_TSF=1 を削りました。
** uinotify.c で SetWindowPos を ShowWindow (SW_NOACTIVATE) の代わりに利用していたのですが、これが X-Mouse と相性が悪くなる原因のようでした。元に戻しました。
** [TSF] dai.h の中で target converted 側の guid を正しく設定していませんでした。そのため enum で失敗していました。
* SNAPSHOT 2004/02/23 (Windows2000 バイナリ / WindowsXP バイナリ / ソース)
** tsf.cpp の snap20040203 までの巻戻しました。
** cmnsrc.inc の Windows2000 build の時に NO_TSF が有効になるよう修正しました。問題は、Windows2000 で通ってはいけない筈の tsf.cpp のコードが NO_TSF が有効になってないがために通ってしまっていたことです。それと tsf.cpp の修正 (spinlock がまずったかな) の余波で Windows2000 で不具合が出ることになりました。
* SNAPSHOT 2004/02/18 (Windows2000 バイナリ / WindowsXP バイナリ)
** uistate.c を 2004/0/03まで巻戻しました。
* SNAPSHOT 2004/02/14 (Windows2000 バイナリ / WindowsXP バイナリ / ソース)
** UpdateIndicIcon と UpdateLanguageBar の切り離し。
** ImeSelect の段階では ActivateLanguageBar のみ、UpdateLangugaeBar を呼び出さないように修正。
** ActivateLanguageBar の段階で TSF 側の button を remove するように修正。(この操作は間違っているかもしれない)
** status window の WM_ERASEBKGND で無効時の bitmap を Window に貼り付けるように修正。
* SNAPSHOT 2004/02/03 (Windows2000 バイナリ / WindowsXP バイナリ / ソース)
** LiteStep など特定の application ないし shell と組み合わせた時に status window が無反応になる (NAKAMURA Toshikazu さん、バグレポートありがとうございます)、
** [TSF] 直接コード入力モードの2番目の menu で候補を選択する際のキーが正しく表示されない、
* SNAPSHOT 2003/12/12 (Windows2000 バイナリ / WindowsXP バイナリ / ソース)
** ユーザ辞書に unicode が使えるようになりました。単語登録の時に wcs2mbs で変換できない文字が存在した場合、そのまま unicode として扱います。が、unicode に一度するとそのままの筈の coding system が multibyte に戻ってしまう現象(バグ)が存在する気がします。調査中です。
** STATE ウィンドウが JISX0201 モードの時にボタンの press/release の変化がないバグの修正。
* SNAPSHOT 2003/11/22 (Windows2000 バイナリ / WindowsXP バイナリ / ソース)
** 「辞書サーバからの応答に、半角カナが含まれていると、その部分がwになってしまう」バグを修正する Fumihiko MACHIDA さんの patch を当てました。(patch ありがとうございます)
** ゲーム専用モードを追加しました。
* SNAPSHOT 2003/10/31 (Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [TSF] 「▽モードでキー入力が変になる。チャタリングが起きたように見える」現象の解決。(composition text 編集中に例外で落としてしまうと、こう見えるようです)
** [TSF] composition text が空の状態で「j-input-by-code-or-menu」を行い、Window を破棄すると minibuffer window が残ってしまうバグの修正
** [TSF] window を移動させた時に minibuffer window が追従するように修正。
** [TSF] keyboard close のタイミングで document を clear するよう修正。
** version.h の更新を忘れていたので、20031031 に修正。
* SNAPSHOT 2003/10/24 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** mozilla が落ちる現象の解決、具体的には ClauseLen に 8 を設定していたところを 0 に変更、です。Fakeime のコードが 8 を入れているように見えたので、8 にあわせていたのですが、mozilla は ClauseLen が設定されていると AttributeLen を参照することなしに ClauseLen 分だけ Attribute を設定しようとしてアクセス違反を出してしまうようです (1.5b で確認)
* SNAPSHOT 2003/10/22 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [TSF] keyboard を open していないのに「かな」が入る。直接入力モードに修正できないバグの修正。
** [TSF] backspace で直前の文字まで消える、backspace を入れると一定時間刺さるバグの修正。
* SNAPSHOT 2003/10/18 (unstable) ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [TSF] Display Attribute のコードを書き直しました。きちんと CDisplayAttributeInfoInput, CDisplayAttributeInfoConverted を Heap に確保するようにしています。
** skkui.c を修正しました。設定値が正しくないように思えた点と結果の読みを入れてない点の修正です。
* SNAPSHOT 2003/10/14 ( WindowsXP バイナリ )
** Display Attribute Provider を無効にしたもの、それ以外は snap2003/10/12 と同じです。これで Yahoo! Messenger など Text Service Framework を利用した application が不意に落ちることがないかテスト中です。
* SNAPSHOT 2003/10/12 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** 「再変換」を実行した時、IME が Open でない場合に IME を Open するように修正。
* SNAPSHOT 2003/10/07 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** 言語バーないし IME バーから入力モードを変更した時にゴミが入るバグの修正。
** [TSF]「IME を open した時にかなモードにする」設定が利かなくなっていたバグの修正。
* SNAPSHOT 2003/09/21 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** 読み仮名の設定、
** [TSF] 入力/変換中のテキストの色、背景、下線の設定が反映されるよう修正。
** [TSF] IE の context menu に出る「IMEを開く」「IMEを閉じる」に対応。
** [TSF] 再変換で(選択されているにもかかわらず)空白のテキストを抜き出してしまうバグの修正。
** [TSF] 単語登録メニューを追加。
** [TSF] 入力切り替えを preserved-key によって実行するよう修正。
* SNAPSHOT 2003/09/03 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [TSF]「ASCIIモード」ないし「全英モード」で改行が入らないバグの修正。
* SNAPSHOT 2003/09/01 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** 「ASCIIモード」ないし「全英モード」での j-newline で「かなモード」に戻るバグの修正。
** Text Service Framework 側を IME 側にあわせて修正(#4 変換、C-return などの修正)。
** WindowsXP + Word2000 で校正エンジンをインストールしていると、Word2000 の終了時に例外が発生する現象への対処コードを追加。(テスト中)
* SNAPSHOT 2003/08/27 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** 「ASCIIモード」ないし「全英モード」から「\C-j」で「かなモード」に戻るようにしました。(今迄は「カナ」「jisx0201」が残っていました)
** 「C-return」が有効にならないバグを修正しました。(C-return にバインドがあれば、C-return が、なければ C-j になります)。
** j-zenkaku-henkan を実装しました。
* SNAPSHOT 2003/08/24 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [add] 数値変換に #4 変換を追加。#4 変換が何か、については「最新情報」に用意しました。ただ #4 変換はまだチェック中です。あと、#4 を複数書くと、その組み合わせの数だけ候補が爆発するという…事態になります。
** [fix] 間違っていた version.h を直しました。今度は snap20030824 と出る筈です。
* SNAPSHOT 2003/08/15 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [add] j-keyboard-quit の動作に「変換が active でない状態で入力中のテキストが存在する場合に、そのテキストをクリアする」を追加
** [fix] [skimic] annotation の処理を追加。今は annotation の表示を削るということだけをしています。
* SNAPSHOT 2003/08/09 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] 候補選択モード(j-henkan-show-candidates-mode)で、数値変換を行っていると、本来は正しく数値に置き換えられているべきところが、# のまま表示されているバグ。
** [fix] 動作しなくなっていた、show-annotation を復元しました。と同時に j-henkan-show-candidates-mode では TOOLTIP を利用して表示するようにしてみました。
* SNAPSHOT 2003/08/08 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] 辞書検索にタイミングによって失敗するバグを修正しました。
** [fix] ToggleIME をテキストを入力中でも有効にしました。
** [new] config dialog の 「Property for」の部分に build した日付を出すようにしました。
** [fix] ガイドウィンドウが単語選択ウィンドウ表示中にも有効になっているバグを修正しました。
* SNAPSHOT 2003/08/04 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] [skkiserv] 未ソートファイル辞書の検索に失敗するバグを修正しました。
** [fix] [skimic] ToggleIME のキーバインドを有効にしました。
* SNAPSHOT 2003/08/03 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] 辞書設定ダイアログでファイルのブラウズを開くと、一部の設定が勝手に disable になるバグを修正しました
** [仕様変更] ASCII モードと半角仮名モードの遷移を禁止して、「かな」「かたかな」モードとのトグルにしました。
* SNAPSHOT 2003/07/27 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] skkiserv が起動されてない段階での pipe connection 待ちが、一切の wait なしだったので、Sleep(100) を実行する毎に pipe が作られているかチェックするように変更。
** [fix] Text Service Framework 側に ``ca'' で ``a'' が入るバグが残っていたので修正。
* SNAPSHOT 2003/07/25 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] j-henkan-show-candidates-mode から単語登録に入り、単語登録を行うと、j-henkan-show-candidates-mode から抜け出せず次のキー入力で落ちるバグを修正しました。
** [fix] WM_IME_KEYDOWN の WPARAM に仮想キーコードを正しく渡していないバグを修正しました。
** [fix] j-insert で該当するローマ字仮名テーブルのエントリがなかった場合の処理を「無限ループ回避」のために j-self-insert にしていたのですが、それだと「prefix を無効にしてもう一度テーブルをひく」ことができなくなるので、unprocess-char に戻しました。
** [fix] ImeDoc で keyfilter する際に一定回数以上までしか unread-event を見ないようにして、その回数を越えると unread-event をクリアするようにしました。
* SNAPSHOT 2003/07/24 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] j-input-by-code-or-menu に入った時に「かな」モードになっているバグ。
** [fix] j-assoc-rule が機能しなくなっているバグ。
** [fix] skkiserv 及び IME 側の skkiserv 起動部分を snap20030715 当時まで rollback。そのため INF を "HKLM\Software\Microsoft\Windows\CurrentVersion\Run" から "skkiserv" を削るように修正しています。
* SNAPSHOT 2003/07/21 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] 間違えて消してしまった「IME を ON にした時に常にかなモードに戻す」checkbox を復元しました。
** [add] toggle-ime の機能を vc-toggle-eggnl という使われてない機能の代わりに用意しました。この機能が bind されたキーを押すと「変換動作中でなく」「何も入力してない」状態で IME の ON/OFF を切り替えることができます。
** [fix?] Windows2000 で漢字変換をしようとした直後に hangup するバグ…。pipe server である skkiserv と DLL client のタイミング依存の問題のようです。pipe を create するタイミングと WaitNamedPipe を実行するタイミングがまずいと、timeout するまで制御が戻らないことがあるようです。(無限待ちだとそのまま hangup) 細かな timeout を設定して (100ms 程度を10回 retry) 頻繁に見直してみるようにしてみました。
* SNAPSHOT 2003/07/20 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] レジストリに設定が何も書かれていない時のデフォルトの初期化処理に含まれるバグを修正。
** [fix] keymap に設定不可能である筈の j-completion が混じっていたバグの修正。
** [fix] ASCII, 全角モードにおける改行機能を司る newline を追加。
** [fix] ガイドラインの表示設定を見るように修正。(IMC_SHOWGUIDELINE)
** [fix] context がセットされた時にガイドが存在すればガイドを表示するよう修正。
** [fix] 半角カナモードで「ー」が入力されてしまうバグを修正。
** [fix] default の composition window がサイズが拡大する方向にしか resize せず、また余白にゴミが表示されるバグを修正。
** [fix] roma-kana-table が存在しない時に j-insert を呼び出すと無限ループに陥るバグを修正。
** [fix] skkiserv の引数に -startup を指定すると、default の keymap が SKKIME の時にだけ起動するように変更。これで HLKM の Run に skkiserv を指定可能。
** [fix] skk-process-okuri-early, skk-delete-okuri-when-quit, skk-kakutei-early の設定を可能に。また再帰変換のコントロールを削除。ガイドを利用した段階で不要だったので。
* SNAPSHOT 2003/07/15 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] IME と Text Service Framework の連携部分の修正。恐らくは、これで IME 側の作業は終了。まずかった点は「IME のボタンと TSF のボタンは同じ GUID を持ってはいけない」「CLSID はキーボード(ボタン)と同じものを利用しないといけない」を破っていたこと。
** [fix] skkFlushTextSub で不自然な message を発行していたのを修正。
** [fix] 動かなくなっていた言語バーの設定ダイアログを復旧。
** [skimic] [add] DisplayAttributeProvider のコードを追加。
* SNAPSHOT 2003/07/13 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] application を stack overflow で落とすバグを修正。NotifyIME の中の ContextUpdated から GenerateMessage を呼び出すのは正しい動作ではないようです。
** [fix] CPS_COMPLETE, CPS_CANCEL が Composition String がなければ WM_IME_XXX を発行しないように修正。無闇に発行すると region 選択されたテキストが消えてしまいます。
* SNAPSHOT 2003/07/11 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] ▽モードで special character (>,<,?) を入力すると確定(しかも▽マークが残る)してしまうバグを修正しました。
** [fix] キー割り当てダイアログを表示すると落ちるバグを修正しました。
** [fix] C-@ のキー割り当てを変更すると、C-@ の行が2つになるバグを修正しました。また、同じようなバグが他のダイアログにも存在したので修正しました。
** [fix] 半角仮名変換で「わ」が変換できないバグを修正しました。
** [fix] 直接文字入力モード、変換候補表示モードで j-keyboard-quit が割り当てられているキーを押すと、処理を抜けるように修正しました。(以前は 0x07 に決め打ち)
* SNAPSHOT 2003/07/10 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] 平仮名変換、片仮名変換が動作しない、「ぁ」「ァ」が変換できないバグを修正しました。
** [fix] IMC_SETSTATUSWINDOWPOS が動作するように修正しました。
** [fix] IMN_SETCOMPOSITIONWINDOW が届くと、Guide の位置も移動させるように修正しました。
** [skimic] Text Service Framework 側で Reconversion が動作するようにしました。
** [skimic] Text Service Framework 側にも平仮名変換、片仮名変換が動作しないというバグがあったので修正しました。
* SNAPSHOT 2003/07/07 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** 変換エンジンを skimic 側から port しました。
** [add] ImeConversionList を実装しました。
** [add] minibuffer window を guide として実装するように変更しました。
** [fix] NotifyIME の NI_CONTEXTUPDATED において IMC_SETCANDIDATEPOS から IME_SETOPENSTATUS までを見るように修正しました。とはいえ、WM_IME_NOTIFY を投げるコードがほとんどです。(これが正しい実装なのかは不明です)
** [fix] NotifyIME の Candidate List 操作 を変換エンジンと同期するように修正しました。
** [fix] skkiserv 待ち (WaitNamedPipe) を無限待ちでは帰って来ないことがあるので 300ms に変更しました。
** [fix] NotifyIME の NI_COMPOSITIONSTR の CPS_COMPLETE から CPS_REVERT までの処理を実装しました。
** [fix] レジストリから設定ファイルを読み込むタイミングを ImmSetActiveContext の時点に変更しました。
** 辞書検索を逐次に変更しました(候補リストの一覧が出るまでは)。local で hit すると network 越しに skkserv を見るよりは軽い筈です。
* SNAPSHOT 2003/06/24 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] j-start-henkan で変換モードになければ、j-input-vector を見るように変更。
** [add] IME を Open すると「かなモード」に戻る機能 + 設定を追加。
** [fix] [TSF] 片仮名変換で「ぁ」が変換できないバグを修正。
* SNAPSHOT 2003/06/18 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] [TSF] 送り仮名変換でサーバ辞書以外の検索をしないバグを修正。
** [fix] [TSF] 詳細なテキストサービスを有効にする、をチェックしないと有効にならないバグを修正。(確認中)
** [fix] 直接コード入力の最初のメニューと次のメニューの間で表示がずれるバグを修正。
* SNAPSHOT 2003/06/15 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] [TSF] 辞書検索の結果、最初の候補が「空白だけ」になるバグを修正。
** [fix] [TSF] prefix が残っている時に unused-event が戻らないバグを修正。具体的には「お」の次の backspace や cursor が利かないバグの修正です。
** [fix] [TSF] keyboard icon を消しました。標準の横向きキーボードを使います。
* SNAPSHOT 2003/06/04 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] skimic.dll が regsvr32 で失敗するバグの修正。vc6 で build し直しました。
** [fix] XP 版の inf file に skimic.dll の行を追加するのを忘れていました。
** [fix] 補助辞書はソートされている、のチェックの動作が変だったのを修正しました。
* SNAPSHOT 2003/06/01 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] 特定のアプリケーション(例、explorer のファイル名変更時)で改行キーが入らないバグを修正。
** [add] skimic に beginning-of-line, end-of-line, yank, kill-region, kill-line を追加。
* SNAPSHOT 2003/05/29 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] j-newline などキーを IME で処理しない時に SHIFT や CONTROL のマスクが落ちる現象の解決。
** [add] skimic に lisp 変換と Menu 操作による Conversion Mode の変更を追加。
* SNAPSHOT 2003/05/28 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] j-input-by-code-or-menu-jump1 に入った瞬間に x キーで前の候補へ戻ると化け候補になる、別の候補を表示しても選択した候補が入力できないというバグを修正しました。
** [fix] conf*.c の中の KEY_READ, KEY_WRITE で open していたレジストリキーを KEY_READ だけで open するように修正しました。
** [fix] skkiserv と通信するための pipe name を作成する場所を DLL load 時点に変更しました。(固定なので毎回作成する必要はなかったですから)
** [fix] skkiserv と通信するための named pipe を NULL security attribute で作成するように変更しました。(今迄は public)
** [add] skimic.dll (XP のみ) を追加しました。Text Service Framework 用です。
* SNAPSHOT 2003/05/13 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix?] skkiserv の start を skkimeOpenPipe に失敗した時に変更しました。取り敢えずテスト(様子見)中です。
* SNAPSHOT 2003/05/04 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] logoff 時に「application の起動に失敗しました」と dialogbox が出る bug を fix しました。
* SNAPSHOT 2003/04/28 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] Windows2000 で logoff に非常に時間がかかる現象を解決しました。
** [fix] WindowsXP/2000 の言語バーでボタンが押せない状況の表示を TF_STATUS_DISABLE を利用するように修正しました。
* SNAPSHOT 2003/04/23 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] Excel2000 で最初の1文字(子音)を入力した時に2文字入ってしまうバグの修正
* SNAPSHOT 2003/04/21 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] 言語バーが有効な時に Status Window を作成しない。
** [fix] 一般の設定(confgene.c) で RegOpenKey の後、RegCloseKey を行っていないバグを修正。(TOYAMA Sumio さん、情報の forward ありがとうございます。2ch の指摘して下さった方、ありがとうございます)
** [fix] 辞書設定においてサーバ辞書の追加を選択後、サーバを追加、追加、削除を行うと OK 選択後サーバ辞書が追加されない。
** [fix] command prompt において現在の conversion mode が更新されなくなっていた。
* SNAPSHOT 2003/04/16 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] 言語バーのアイコンの表示設定を追加した時に、その設定の UPDATE の成功失敗を返す変数の初期化を忘れるという失敗をしていました。このために skkiserv 側に設定の変更が通知されなくなっていました。
** [fix] 辞書の検索順序設定で「辞書の追加」を行った時、実際の検索順序と表示位置がずれるバグの修正。
* SNAPSHOT 2003/04/12 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** 言語バーに表示されるアイコンの表示/非表示設定ができるようにしました。また、キーボードアイコンを利用するようにしました。
** 言語バーのアイコン表示のカスタマイズ用 dialog box を作成しました。Windows2000 での動作が今一つ良くないので単体アプリケーションとして切り出して、テストする必要があります (TODO)
** 入力ベクトルを編集すると、以前の候補が残るバグを修正しました。
** ImmSetConversionStatus が機能するように修正しました。言語バーからの設定で「JISX0201」から「かな」への切り替えが腐っていた問題も、これで修正されていると思います。
* SNAPSHOT 2003/03/24 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] WindowsXP 環境でテキストを入力しようと瞬間落ちるバグを修正。
** [fix?] 言語バーのアイコンに優先順位をきちんと設定しました。これで二重にアイコンが出る現象が出なくなれば良いのですが。(手元試験中)
** [fix] 言語バーを最小化した時に「追加アイコンを表示する」にチェックが入っていなくても、タスクバーにアイコンが表示されるようにしました。
* SNAPSHOT 2003/03/19 (unstable)
** フォルダを削除した時などに固まるバグに対処しました。言語バーの処理の排他制御に TIMEOUT を追加しています。
** 言語バーにアイコンが2重に出るバグに対処療法ですが対応しました。単純にアイコンの登録削除の順番を変更して、2重に出る側を操作しないようにしただけ…ですが。MSIME が実際にどのような作業を行っているのか、また Text Service Framework Aware Application との切り替え時に発生することが多いのは正しいのか、確認中です。
* SNAPSHOT 2003/03/08 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] snap20030307 で直っていなかった ``set-mark-command (\C-SPC, \C-@) 及び j-prefix-char (\C-c) を Composition String が入ってない状況で食べていたバグ'' を修正。
** [add] 言語バーに表示される入力モードのアイコンの文字色を黒/白、自動判別するように修正。
* SNAPSHOT 2003/03/07 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] set-mark-command (\C-SPC, \C-@) 及び j-prefix-char (\C-c) を Composition String が入ってない状況で食べていたバグを修正。
** [fix] INIT_COMPFORM の時点で default の composition form を変更。default の IME に設定した時に emacs (素の VC build)で IME を使った時に UICOMP Window が変な位置に出なくなりました。
** [add] configuration dialog の設定で recursive-edit を止められるようにしました。
* SNAPSHOT 2003/03/04 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] 非初期化処理が ImeDestroy は間違い。DllMain の中に移動。ただし、LanguageBarItemMgr を得ると application が終了時に例外を出すようになるので、その部分だけは外す。
** [fix] ImeSelect の中に初期化処理を移動。ただし、非初期化処理が ImeSelect には入れれない(Mozilla が落ちる)ので、TRUE だった時の最初の一回だけ初期化を行い、それ以降は ActivateLanguageBar のみを行うように修正。
* SNAPSHOT 2003/03/03 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] Text Service Framework の初期化処理を skki1_0.c の中に、非初期化処理を ImeDestroy の中に移動させました。これで正しく動いて欲しいところですが。
** [fix] 直接コード入力を通常の変換と同様 CANDLIST を使うように修正しました。
** [fix] SKK モードでの文字入力を GCS_RESULT を使うように修正しました。
* SNAPSHOT 2003/02/13 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] imm.c の中の lpIMC != NULL の中に Text Service Framework の初期化/非初期化処理を移動。前回の snapshot ではその外に出してしまっていたのですが、これが多少不安定さを呼んでいたように思います。
* SNAPSHOT 2003/02/02 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] snap20030201 では完全に fix できていなかったので再度、Text Service Framework の初期化/非初期化位置の調整を行いました。引き続きテスト中です。
** [fix] completion の順序を直す時に移動させる先が間違っていたので修正。
* SNAPSHOT 2003/02/01 - unstable ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] OfficeXP のインストールされている Windows2000 もしくは WindowsXP において default の IME とすると、process の終了時に「read エラー」が発生するようになるバグを修正。(完全に fix できたか確認中)
** [fix] completion の順序が「確定」しても変化しないバグを修正。
* SNAPSHOT 2003/01/30 - unstable ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] 言語バーの細かな実装のバグの修正。例えば、メニューのチェックの位置がいい加減であること、直接入力が選べないこと、同一プロセスで IME を MS-IME に戻した時に言語バーに ICON が残ること、ツールボタンがないこと、です。
** [fix] skkiserv のサーバ辞書の検索が 512 バイト分しか skkserv から受信しないという駄目な作りだったのですが(それで足りると思っていました)、町田さんが patch を送って下さいました。ありがとうございます。m(_ _)m
* SNAPSHOT 2003/01/27 - unstable ( WindowsXP バイナリ / ソース )
** [add] 言語バーの対応。ただし、tsf.cpp はかなり腐ってます。書き直さなければ。また、言語バーの対応のために MSVCRT を link してしまっています。その副作用は不明です。
* SNAPSHOT 2003/01/16 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] Annotation Window が頻繁に Show/Hide を繰り返す現象を抑制。
** [fix] Annotation Window が Candidate Window に従って移動するよう修正。
** [fix] Composition Window がちらつく現象を緩和。(WM_ERASEBKGND を奪っただけです)
* SNAPSHOT 2003/01/13 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [add] annotation の表示機能を追加。annotation 付きの L 辞書も利用可能になりました。ただし、この機能は(激しく)テスト中です。
* SNAPSHOT 2003/01/11 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix?] サーバ辞書の検索時に「直前の検索結果」を引くことがあるバグに対処。
* SNAPSHOT 2003/01/10 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [add] 色設定ダイアログを実装。未変換文字列と変換文字列の2つしかありませんが…。
* SNAPSHOT 2003/01/03 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] ソート済み辞書の検索ができないバグを修正(動作確認中)。Release Build した skkiserv.exe に発生するバグだったため、Debug Build で使い続けていた(テストが甘い)ため、確認 & 再現が遅れました。
** [fix] 将棋変換で最初の1文字目が化けるバグを修正。
** [fix] 辞書設定の更新などレジストリの値を更新する時に前回までの設定を消去していたのですが、RegEnumValue + RegDeleteValue で列挙し切れてない (Flush の問題かな) ことに気付きましたので、RegDeleteKey でキーごと消去するように変更。
* SNAPSHOT 2003/01/02 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] Config Dialog の辞書の検索リストで「辞書を削除」しても「更新」が有効にならないバグを修正。
** [fix] Config Dialog で「更新」「OK」を押して skkiserv に検索辞書の変更を通知した時、skkiserv が今迄持っていた検索辞書の情報を捨てずにいるバグを修正。
* SNAPSHOT 2003/01/01 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] 「再変換」を行った時に IME が Open されてなかったら Open し、仮名モードでなかったら仮名モードにしてから、Composition String を設定するように修正。
** [fix] Outlook Express で "s" space の順番に入力すると、"s" が残る現象が発覚(仮名プレフィクスが消えない)。ところが Notepad では再現しない。Result String が space だと何かあるようなので、Result String が space のみの場合にはキーとして返すように変更。
* SNAPSHOT 2002/12/25 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [change] skkiserv が skkserv との connection を維持するように修正。
** [fix] サーバ辞書に対する補助辞書の設定が無効になっていたのを修正。
* SNAPSHOT 2002/12/15b ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] WM_IME_SETCONTEXT で表示するよう設定されてない Window が表示されてしまうバグ。
* SNAPSHOT 2002/12/15 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix?] 単語登録モードで [ALT-漢字] により入力を中止すると、次に IME による入力開始時にアプリケーションが落ちるバグ (テスト中)
** [fix] 設定ダイアログで右クリックメニューが利かなくなっていた。
** [fix] 辞書設定ダイアログで[削除]ボタンを有効に。
** [fix] / の入っている候補に対して completion が働かない。
* SNAPSHOT 2002/12/01 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース)
** [add] 再変換の機能を追加。ただし、MAKEREAD 及び CPS_REVERT はまだ動かない。また逆変換の機能もない。
* SNAPSHOT 2002/11/30 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [add] Ime の設定に「全般」を追加。egg-like-newline, delete-implies-kakutei などの設定が可能になった。「色設定」も追加されているが、こちらはまだ動かない。
* SNAPSHOT 2002/11/29 ( Windows2000 バイナリ / WindowsXP バイナリ / ソース )
** [fix] Excel (office2000) で利用した場合、Default の Ime に設定していると、Default Window が表示されてしまうバグ。
** [fix] Visual Studio で build した Emacs で利用すると、入力中のテキストが表示されなくなるバグ。
** [fix] skkime が active になっていると Escape などのキーがテキストを入力中でないにも関わらず application へ渡らなくなるバグ。
** [fix] .skk-jisyo を読ませた時に skk の送り変換の項目を変換結果候補としてしまうバグ。
* SNAPSHOT 2002/11/06 (実行形式 / ソース)
** [fix] system ユーザで skkiserv.exe を起動してしまうバグ。標準の ime に設定した時に辞書の検索が一切できなくなる現象として現れる。
* SNAPSHOT 2002/11/01 (実行形式 / ソース)
** [fix] now を変換すると (current-time-string) で skkiserv.exe が落ちるバグ。
** [fix] completion で「▽あ」から TAB を打つと「あ▽」のようになるバグ。
** [fix] 設定 dialog で browse button を有効に。
* SNAPSHOT 2002/10/31b (実行形式 / ソース)
** [fix] サーバ辞書への接続がタイムアウトすると、skkiserv.exe が異常終了する。
** [fix] レジストリに登録するパスが間違っていた。
** [fix] 直接コード入力が動作しなくなっていた。
* SNAPSHOT 2002/10/31 (実行形式 / ソース)
** すみません。昨日の snapshot はゴミです。すぐに捨てて下さい。多少、まともに動くように修正したものがこの 2002/10/31 です。
** 突貫工事で skkinput3 から lisp-eval の code を移動させました。
* SNAPSHOT 2002/10/30 (実行形式 / ソース)
** 辞書のセーブは logout 時に自動にするように変更。(まだ動作はきちんと確認されていません)
** この snapshot はかなり危険です。人柱覚悟になるかと思われます。

==== Text Service Framework に追加する方法 ====

inf を利用して install を行うと、WINDOWS directory 以下 IME/SKKIM10 の下に skimic.dll がコピーされていると思います。

    cd %windir%\IME\SKKIM10
    regsvr32 skimic.dll

と行うことで install ができます。

が、一度 install してしまうと削除が困難なので注意して下さい。uninstall するためにはレジストリを編集する必要があります。

レジストリエディタを利用して、

   HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\CTF\TIP\{830DE831-E04D-40BB-8683-1E179A5F1A4F}

のキー以下を削除して下さい。これで Text Service Framework 版と IME との連携が切断されます。

もしくは、

   regsvr32 /u skimic.dll

を実行します。

Text Service Framework と統合する利点は次の通りです。

* Internet Explorer の security の設定 tab を動かして、適用 or OK を押した後の反応が軽い。
* 言語バーの表示順序が正しくなる。(本来はヘルプの左側に入力モードなどのアイコンが出ないといけない)

Text Service Framework 版はまだ作成中かつテスト中です。具体的に次の機能が欠落しています。

* LISP 変換、日付入力
* 言語バーメニューからの操作
* Reconversion (= ITfReconversion を実装すること)
* テスト(一通りの動作を確認して、メールを数通書いてみて試した、までです)

==== 動作確認を行ったアプリケーション ====

* OfficeXP personal (一通りだけ、となりますが)
* Outlook Express 6.0sp1
* Internet Explorer 6.0sp1

==== Undocumented な情報 ====

きちんとまとめないといけないと思いつつも、何処にも記載されてない機能を(しかも分かりにくい)書きます。

* 辞書設定ダイアログのリストボックスには順序があります。上から順番に辞書は検索され、変換結果もその順番に出ます。辞書の検索順序を入れ替えるには、リストの要素を Drag & Drop して移動させて下さい。
* かなモードから Control-q で JISX0201-1976-KATAKANA 入力モード(いわゆる半角カナ入力モード)へと切り替わります(トグル動作)。
* まる数字は、一応直接コード入力から入れることが可能です。

ソースコードから実行形式を作るにあたって

WINDDK を入手します。ただ、Microsoft から download できなくなっているのか、order するか MSDN Subscriber になる必要があるみたいです。手元では Windows DDK 2600.1106 を利用しています。

Windows DDK のインストール自体は installer が走りますし、出てくるメッセージに従って[Next]を選択していれば完了します。(インストールするファイルを選択したり、インストール先を設定したりしなければなりませんが。)

首尾よくインストールが完了すれば、Start Menu に Development Kits が追加されている筈です。 Start - Program - Development Kits - Windows DDK 2600.1106 - Build Environments - で Windows2000 Checked Build Environments か WindowsXP 32bit Checed Build Environments を選択します。

先にダウンロードしていたソースアーカイブを適当なディレクトリで展開しておきます。例えば、 C:\tmp でしょうか。

=== [SKKIME for WindowsNT4.0] ===

==== 開発の状況 ====

完全に停止しています。取り敢えず code をサルベージできたので、実行環境は VirtualPC に入れて開発する予定です。

=== [リンク] ===

skkime について紹介、インストールの説明等々して下さっているページへのリンクです。

* 吉田智彦さんの skkime のインストールページ

Takashi SAKAMOTO (PXG01715@nifty.ne.jp)
